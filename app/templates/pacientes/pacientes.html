<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pacientes - NubeClinic</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/panel.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
<div class="panel-container">
    {% include 'components/sidebar.html' %}

    <div class="panel-content">
        <div class="panel-header">
            <h1 class="panel-title">Pacientes</h1>
            <div class="panel-actions">
                <select class="panel-select">
                    <option>Autorización para enviar comunicaciones comerciales</option>
                </select>
                <select class="panel-select">
                    <option>Datos de contacto</option>
                </select>
                <select class="panel-select">
                    <option>Estado del paciente</option>
                </select>
                <button class="panel-button-outline">Ordenar por</button>
                <button class="panel-button-outline">Editar lista de pacientes</button>
                <button class="panel-button-primary">+ Añadir paciente</button>
            </div>
        </div>

        <div class="panel-subtitle">Se han encontrado <strong>{{ pacientes|length }}</strong> resultados</div>

        <div class="panel-table-container">
            <table class="panel-table">
                <thead>
                    <tr>
                        <th>Nombre y Apellidos</th>
                        <th>Número de Paciente</th>
                        <th>Email</th>
                        <th>Teléfono</th>
                        <th>Última visita</th>
                        <th>Siguiente visita</th>
                        <th>Documento de identidad</th>
                        <th>Autorización para enviar comunicaciones comerciales</th>
                    </tr>
                </thead>
                <tbody>
                    {% for paciente in pacientes %}
                    <tr>
                        <td>{{ paciente.nombre }} {{ paciente.apellidos }}</td>
                        <td>{{ paciente.numero_paciente }}</td>
                        <td>
                            {% if paciente.email %}
                                {{ paciente.email }}
                            {% else %}
                                <a href="#" class="link-add">Añadir email</a>
                            {% endif %}
                        </td>
                        <td>{{ paciente.telefono }}</td>
                        <td>{{ paciente.ultima_visita or '-' }}</td>
                        <td>{{ paciente.siguiente_visita or 'Crear cita' }}</td>
                        <td>{{ paciente.dni or '-' }}</td>
                        <td>{{ paciente.autorizacion }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
