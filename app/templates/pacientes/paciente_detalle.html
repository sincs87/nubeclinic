{% extends "components/sidebar.html" %}

{% block content %}
<div class="container-fluid px-5 py-4" style="max-width: 1600px;">
  <div class="row">
    <!-- Sidebar paciente -->
    <div class="col-xl-3 col-lg-4">
      <div class="bg-white shadow-sm rounded p-4">
        <div class="text-center">
          <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center mx-auto" style="width: 80px; height: 80px; font-size: 24px;">
            {{ paciente.nombre[0] }}{{ paciente.apellidos[0] }}
          </div>
          <h5 class="mt-3 mb-0">{{ paciente.nombre }} {{ paciente.apellidos }}</h5>
          <p class="text-muted">Nº {{ paciente.id|string|slice(0, 5) }}</p>
        </div>

        <div class="d-flex justify-content-around my-3">
          <i class="fas fa-calendar-plus text-muted"></i>
          <i class="fas fa-notes-medical text-muted"></i>
          <i class="fas fa-user-circle text-muted"></i>
          <i class="fas fa-ellipsis-h text-muted"></i>
        </div>

        <div class="mb-3 small">
          {% if paciente.email %}<p><i class="fas fa-envelope me-2"></i>{{ paciente.email }}</p>{% endif %}
          {% if paciente.telefono %}<p><i class="fas fa-phone me-2"></i>{{ paciente.telefono }}</p>{% endif %}
        </div>

        <div class="form-group">
          <label class="form-label fw-semibold">Notas</label>
          <textarea class="form-control form-control-sm" rows="4" name="notas">{{ paciente.notas or '' }}</textarea>
        </div>

        <div class="mt-4">
          <label class="form-label fw-semibold">Otra información médica</label>
          <ul class="list-unstyled small text-muted ps-3">
            <li>Alergias</li>
            <li>Medicación</li>
            <li>Antecedentes médicos</li>
            <li>Otros</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Formulario -->
    <div class="col-xl-9 col-lg-8">
      <div class="bg-white shadow-sm rounded">
        <div class="border-bottom px-4 pt-4">
          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active">Datos del paciente</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled">Historial clínico</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled">Citas</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled">Lista de pagos</a>
            </li>
          </ul>
        </div>

        <form method="POST" class="p-4">
          <h5 class="mb-3">Datos generales del paciente</h5>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Nombre*</label>
              <input type="text" class="form-control" name="nombre" value="{{ paciente.nombre }}" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Apellidos*</label>
              <input type="text" class="form-control" name="apellidos" value="{{ paciente.apellidos }}" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Fecha de nacimiento</label>
              <input type="date" class="form-control" name="fecha_nacimiento" value="{{ paciente.fecha_nacimiento }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Género</label>
              <select class="form-select" name="genero">
                <option value="">Selecciona una opción</option>
                <option value="Hombre" {% if paciente.genero == 'Hombre' %}selected{% endif %}>Hombre</option>
                <option value="Mujer" {% if paciente.genero == 'Mujer' %}selected{% endif %}>Mujer</option>
                <option value="Otro" {% if paciente.genero == 'Otro' %}selected{% endif %}>Otro</option>
              </select>
            </div>
            <div class="col-md-12 mb-3">
              <label class="form-label">Tipo de paciente</label><br>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="tipo_paciente" value="Privado" {% if paciente.tipo_paciente == 'Privado' %}checked{% endif %}>
                <label class="form-check-label">Privado</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="tipo_paciente" value="De aseguradora" {% if paciente.tipo_paciente == 'De aseguradora' %}checked{% endif %}>
                <label class="form-check-label">De aseguradora</label>
              </div>
            </div>
          </div>

          <h5 class="mt-4 mb-3">Datos administrativos y contacto</h5>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Estado del paciente</label>
              <select class="form-select" name="estado">
                <option value="Activo" selected>Activo</option>
                <option value="Inactivo">Inactivo</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Número de documento</label>
              <input type="text" class="form-control" name="dni" value="{{ paciente.dni }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Teléfono</label>
              <input type="text" class="form-control" name="telefono" value="{{ paciente.telefono }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" name="email" value="{{ paciente.email }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Ciudad</label>
              <input type="text" class="form-control" name="ciudad" value="{{ paciente.ciudad }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Provincia</label>
              <input type="text" class="form-control" name="provincia" value="{{ paciente.provincia }}">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Nacionalidad</label>
              <input type="text" class="form-control" name="nacionalidad" value="{{ paciente.nacionalidad }}">
            </div>
          </div>

          <div class="text-end">
            <button type="submit" class="btn btn-primary">Guardar cambios</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}